{% extends "base.html" %}

{% block title %}Новый пароль — ParkShare RU{% endblock %}

{% block content %}
<section class="ps-auth">
    <div class="ps-auth-card ps-card ps-card--elevated ps-animate-fade-up">
        {% if validlink %}
            <h1 class="ps-auth-title">Задайте новый пароль</h1>
            <p class="ps-auth-subtitle">
                Введите новый пароль дважды, чтобы исключить опечатки.
            </p>

            <form method="post" class="ps-form">
                {% csrf_token %}
                {% if form.non_field_errors %}
                    <div class="ps-alert ps-alert--danger">
                        {{ form.non_field_errors }}
                    </div>
                {% endif %}

                {% for field in form.visible_fields %}
                    <div class="ps-form-row">
                        <label class="ps-form-label" for="{{ field.id_for_label }}">
                            {{ field.label }}
                        </label>
                        {{ field }}
                        {% if field.help_text %}
                            <div class="ps-field-help">{{ field.help_text }}</div>
                        {% endif %}
                        {% for error in field.errors %}
                            <div class="ps-field-error">{{ error }}</div>
                        {% endfor %}
                    </div>
                {% endfor %}

                <div class="ps-form-actions">
                    <button type="submit" class="ps-btn ps-btn-full">
                        Сохранить новый пароль
                    </button>
                </div>
            </form>
        {% else %}
            <h1 class="ps-auth-title">Ссылка недействительна</h1>
            <p class="ps-auth-subtitle">
                Ссылка для сброса пароля устарела или уже была использована.
                Попробуйте запросить сброс ещё раз.
            </p>
            <div class="ps-offline-actions">
                <a href="{% url 'accounts:password_reset' %}" class="ps-btn">
                    Запросить новую ссылку
                </a>
            </div>
        {% endif %}
    </div>
</section>
{% endblock %}
